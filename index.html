<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>é«”é‡ç´€éŒ„ï½œ170cm</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Chart.js CDNï¼šç”¨ä¾†ç•«é«”é‡è®ŠåŒ–æŠ˜ç·šåœ– -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    :root {
      --bg: #f5f7fb;
      --card-bg: #ffffff;
      --primary: #3056d3;
      --primary-soft: #e5ebff;
      --accent: #f97373;
      --text-main: #1f2933;
      --text-sub: #6b7280;
      --border: #e2e8f0;
      --radius-lg: 16px;
      --radius-sm: 6px;
      --shadow-soft: 0 10px 30px rgba(15, 23, 42, 0.08);
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui,
        "PingFang TC", "Microsoft JhengHei", sans-serif;
      background: radial-gradient(circle at top, #eef2ff 0, #f9fafb 40%, #f5f7fb 100%);
      color: var(--text-main);
    }

    .page {
      max-width: 960px;
      margin: 0 auto;
      padding: 24px 16px 40px;
    }

    header {
      margin-bottom: 20px;
    }

    header h1 {
      font-size: 26px;
      margin: 0 0 4px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    header h1 span.emoji {
      font-size: 26px;
    }

    header p {
      margin: 0;
      font-size: 14px;
      color: var(--text-sub);
    }

    .grid {
      display: grid;
      grid-template-columns: minmax(0, 1.2fr) minmax(0, 1.8fr);
      gap: 16px;
      margin-bottom: 18px;
    }

    @media (max-width: 768px) {
      .grid {
        grid-template-columns: 1fr;
      }
    }

    .card {
      background: var(--card-bg);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-soft);
      padding: 16px 18px;
      border: 1px solid rgba(148, 163, 184, 0.15);
    }

    .card-title {
      font-size: 15px;
      font-weight: 600;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .card-title span.icon {
      font-size: 18px;
    }

    /* åŸºæœ¬è³‡è¨Šå€ */
    .profile-row {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      margin-bottom: 12px;
    }

    .chip {
      padding: 6px 10px;
      border-radius: 999px;
      background: var(--primary-soft);
      font-size: 13px;
      color: var(--primary);
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .chip strong {
      font-weight: 600;
    }

    .stat-grid {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 8px;
    }

    @media (max-width: 600px) {
      .stat-grid {
        grid-template-columns: repeat(2, minmax(0, 1fr));
      }
    }

    .stat-item {
      background: #f9fafb;
      border-radius: var(--radius-sm);
      padding: 8px 10px;
      border: 1px solid var(--border);
    }

    .stat-label {
      font-size: 12px;
      color: var(--text-sub);
      margin-bottom: 4px;
    }

    .stat-value {
      font-size: 16px;
      font-weight: 600;
    }

    .stat-tag {
      font-size: 11px;
      color: var(--primary);
      margin-left: 4px;
    }

    .stat-change-positive {
      color: #16a34a;
      font-size: 12px;
      margin-top: 2px;
    }

    .stat-change-negative {
      color: var(--accent);
      font-size: 12px;
      margin-top: 2px;
    }

    /* è¡¨æ ¼ */
    .table-wrapper {
      max-height: 320px;
      overflow: auto;
      border-radius: var(--radius-sm);
      border: 1px solid var(--border);
      background: #f9fafb;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 13px;
      min-width: 260px;
    }

    thead {
      position: sticky;
      top: 0;
      background: #e5ebff;
      z-index: 1;
    }

    th,
    td {
      padding: 8px 10px;
      border-bottom: 1px solid #e5e7eb;
      text-align: right;
      white-space: nowrap;
    }

    th:first-child,
    td:first-child {
      text-align: left;
    }

    th {
      font-weight: 600;
      color: var(--text-sub);
    }

    tr:nth-child(even) td {
      background: #f9fafb;
    }

    tr.highlight td {
      background: #fef3c7;
      font-weight: 600;
    }

    /* åœ–è¡¨å¡ç‰‡ */
    #weightChart {
    width: 100%;
    max-height: 260px;
    min-height: 190px;
    }

    @media (max-width: 768px) {
    #weightChart {
        max-height: 230px;
        min-height: 170px;
    }
    }

    @media (max-width: 480px) {
    #weightChart {
        max-height: 210px;
        min-height: 160px;
    }
    }


    .chart-legend {
      margin-top: 8px;
      font-size: 12px;
      color: var(--text-sub);
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
    }

    .legend-dot {
      width: 10px;
      height: 10px;
      border-radius: 999px;
      display: inline-block;
      margin-right: 4px;
      border: 1px solid rgba(15, 23, 42, 0.3);
      background: #ffffff; /* çœŸå¯¦é¡è‰²ç”± JS å‹•æ…‹å¡ */
    }

    footer {
      margin-top: 20px;
      font-size: 11px;
      color: var(--text-sub);
      text-align: center;
    }
    /* ========= æ‰‹æ©Ÿ / å¹³æ¿ RWD ========= */

/* å¹³æ¿ä»¥ä¸‹ï¼ˆç´„ iPad / ä¸€èˆ¬æ‰‹æ©Ÿæ©«å‘ï¼‰ */
@media (max-width: 768px) {
  body {
    background: #f5f7fb; /* æ‰‹æ©Ÿå°±ä¸è¦å¤ªå¼·çš„æ¼¸å±¤ï¼Œä¹¾æ·¨ä¸€é» */
  }

  .page {
    padding: 16px 12px 28px;
  }

  header {
    margin-bottom: 16px;
  }

  header h1 {
    font-size: 22px;
  }

  header p {
    font-size: 13px;
  }

  .card {
    padding: 14px 12px;
    border-radius: 12px;
  }

  .card-title {
    font-size: 14px;
    margin-bottom: 8px;
  }

  .profile-row {
    gap: 8px;
    margin-bottom: 10px;
  }

  .chip {
    font-size: 12px;
    padding: 5px 9px;
  }

  .stat-item {
    padding: 7px 8px;
  }

  .stat-label {
    font-size: 11px;
  }

  .stat-value {
    font-size: 15px;
  }

  .stat-tag {
    font-size: 10px;
  }

  .chart-legend {
    font-size: 11px;
  }

  .table-wrapper {
    max-height: 260px; /* æ‰‹æ©Ÿä¸è¦å¤ªé«˜ï¼Œè¦è®“ä¸Šé¢çš„å¡ç‰‡ä¹Ÿçœ‹å¾—åˆ° */
  }

  th,
  td {
    padding: 7px 8px;
    font-size: 12px;
  }
}

/* å°æ‰‹æ©Ÿï¼ˆiPhone SE / 8 sizeï¼‰ */
@media (max-width: 480px) {
  .page {
    padding: 14px 10px 24px;
  }

  header h1 {
    font-size: 20px;
  }

  header p {
    font-size: 12px;
  }

  .grid {
    gap: 12px;
  }

  .card {
    padding: 12px 10px;
  }

  .profile-row {
    flex-direction: column;
    align-items: stretch;
  }

  .chip {
    width: 100%;
    justify-content: space-between;
  }

  .stat-grid {
    grid-template-columns: 1fr; /* ä¸‰å€‹å°å¡ç‰‡æ”¹æˆä¸€åˆ—ä¸€å€‹ï¼Œå¾€ä¸‹æ’ */
    gap: 6px;
  }

  .stat-item {
    padding: 6px 8px;
  }

  footer {
    font-size: 10px;
  }

  /* è¡¨æ ¼åœ¨æ‰‹æ©Ÿä¸Šæ›´è²¼é‚Šä¸€é» */
  .table-wrapper {
    border-radius: 10px;
  }

  table {
    font-size: 12px;
  }

  th,
  td {
    padding: 6px 6px;
  }
}

  </style>
</head>
<body>
  <div class="page">
    <header>
      <h1>
        <span class="emoji">ğŸ“‰</span>
        çª©ã„‰é«”æ¸›è‚¥å…‰æ¦®ä¹‹è·¯
      </h1>
      <p>æˆ‘è¦æ¸›!!!!!!!çœ‹è‡ªå·±ã„‰æ¥µé™(?)</p>
    </header>

    <div class="grid">
      <!-- å·¦ï¼šåŸºæœ¬è³‡æ–™ + æ•´é«”ç‹€æ³ -->
      <section class="card">
        <h2 class="card-title">
          <span class="icon">ğŸ‘¤</span>
          ABOUT
        </h2>

        <div class="profile-row">
          <span class="chip">
            èº«é«˜ï¼š<strong id="heightText">169 cm</strong>
          </span>
          <span class="chip">
            æœ€è¿‘é«”é‡ï¼š<strong id="latestWeightText">-- kg</strong>
          </span>
        </div>

        <div class="stat-grid">
          <div class="stat-item">
            <div class="stat-label">ç›®å‰ BMI</div>
            <div class="stat-value">
              <span id="bmiValue">--</span>
              <span class="stat-tag" id="bmiTag"></span>
            </div>
          </div>
          <div class="stat-item">
            <div class="stat-label">å¾èµ·é»è®ŠåŒ–</div>
            <div class="stat-value">
              <span id="diffFromStart">-- kg</span>
            </div>
            <div id="diffFromStartText" class="stat-change-positive"></div>
          </div>
          <div class="stat-item">
            <div class="stat-label">ç´€éŒ„ç­†æ•¸</div>
            <div class="stat-value" id="recordCount">-- ç­†</div>
          </div>
        </div>
      </section>

      <!-- å³ï¼šæŠ˜ç·šåœ– -->
      <section class="card">
        <h2 class="card-title">
          <span class="icon">ğŸ“ˆ</span>
          é«”é‡æŠ˜ç·šåœ–
        </h2>
        <canvas id="weightChart"></canvas>
        <div class="chart-legend">
          <span><span id="lineColorDot" class="legend-dot"></span>æ¯æ—¥é«”é‡ï¼ˆkgï¼‰</span>
        </div>
      </section>
    </div>

    <!-- ä¸‹æ–¹ï¼šç´€éŒ„è¡¨æ ¼ -->
    <section class="card">
      <h2 class="card-title">
        <span class="icon">ğŸ“…</span>
        é«”é‡æ•¸æ“šï¼ˆ11â€“12 æœˆï¼‰
      </h2>

      <div class="table-wrapper">
        <table>
          <thead>
            <tr>
              <th>æ—¥æœŸ</th>
              <th>é«”é‡ (kg)</th>
              <th>BMI</th>
            </tr>
          </thead>
          <tbody id="recordTbody">
            <!-- JS ç”¢ç”Ÿ -->
          </tbody>
        </table>
      </div>
    </section>

    <footer>
      æœ€è¿‘ä¸€æ¬¡æ›´æ–°ï¼š<span id="lastUpdateText"></span>
    </footer>
  </div>

  <script>
    // ====== è³‡æ–™å€ï¼šå¯ä»¥ä¹‹å¾Œè‡ªå·±æ…¢æ…¢å¾€ä¸‹åŠ  ======
    const heightCm = 170;

    // ç›®å‰æä¾›çš„ç´€éŒ„
    const records = [
      // month: '11' / '12' æ–¹ä¾¿ä¹‹å¾Œè¦åˆ†æœˆç”¨
      { date: '11/16', month: 11, day: 16, weight: 72.9 },
      { date: '11/17', month: 11, day: 17, weight: 71.7 },
      { date: '11/18', month: 11, day: 18, weight: 71.7 },
      { date: '11/19', month: 11, day: 19, weight: 70.85 },
      { date: '11/20', month: 11, day: 20, weight: 70.55 },
      { date: '11/21', month: 11, day: 21, weight: 69.6 },
      { date: '11/22', month: 11, day: 22, weight: 69.55 },
      { date: '11/23', month: 11, day: 23, weight: 68.9 },
      { date: '11/25', month: 11, day: 25, weight: 70.1 },
      { date: '11/26', month: 11, day: 26, weight: 69.55 },
      { date: '11/29', month: 11, day: 29, weight: 69.25 },
      { date: '12/1',  month: 12, day: 1,  weight: 69.15 },
      { date: '12/3',  month: 12, day: 3,  weight: 68.95 },
      { date: '12/4',  month: 12, day: 4,  weight: 68.25 },
      { date: '12/5',  month: 12, day: 5,  weight: 68.6 },
      { date: '12/8',  month: 12, day: 8,  weight: 67.85 },
      { date: '12/10',  month: 12, day: 10,  weight: 67.3 },
      { date: '12/11',  month: 12, day: 11,  weight: 67 },
      { date: '12/12',  month: 12, day: 12,  weight: 66.7 },
      { date: '12/16',  month: 12, day: 16,  weight: 67.9 },
      { date: '12/17',  month: 12, day: 17,  weight: 66.95 },
      { date: '12/18',  month: 12, day: 18,  weight: 67.1 },
      { date: '12/20',  month: 12, day: 20,  weight: 66.6 },
      { date: '12/21',  month: 12, day: 21,  weight: 66.95 },
      { date: '12/23',  month: 12, day: 23,  weight: 66.2 },
      { date: '12/24',  month: 12, day: 24,  weight: 66.65 },
      { date: '12/25',  month: 12, day: 25,  weight: 66.5 },
      { date: '12/27',  month: 12, day: 27,  weight: 66.15 },
      { date: '12/29',  month: 12, day: 29,  weight: 66.95 },
      { date: '12/31',  month: 12, day: 31,  weight: 66.2 },
      { date: '1/2',  month: 1, day: 2,  weight: 66.4 },
      { date: '1/3',  month: 1, day: 3,  weight: 65.95 },
      { date: '1/4',  month: 1, day: 4,  weight: 66.15 },
      { date: '1/5',  month: 1, day: 5,  weight: 66.55 },
      { date: '1/6',  month: 1, day: 6,  weight: 66.4 },
      { date: '1/7',  month: 1, day: 7,  weight: 65.75 },
    ];

    // ====== å°å·¥å…· function ======
    function calcBmi(weightKg, heightCm) {
      const h = heightCm / 100;
      return weightKg / (h * h);
    }

    function bmiCategory(bmi) {
      if (bmi < 18.5) return 'éè¼•';
      if (bmi < 24) return 'æ­£å¸¸';
      if (bmi < 27) return 'éé‡';
      if (bmi < 30) return 'è¼•åº¦è‚¥èƒ–';
      if (bmi < 35) return 'ä¸­åº¦è‚¥èƒ–';
      return 'é‡åº¦è‚¥èƒ–';
    }

    // ====== åˆå§‹åŒ–ç•«é¢æ–‡å­— ======
    const heightText = document.getElementById('heightText');
    const latestWeightText = document.getElementById('latestWeightText');
    const bmiValueEl = document.getElementById('bmiValue');
    const bmiTagEl = document.getElementById('bmiTag');
    const diffFromStartEl = document.getElementById('diffFromStart');
    const diffFromStartTextEl = document.getElementById('diffFromStartText');
    const recordCountEl = document.getElementById('recordCount');
    const lastUpdateTextEl = document.getElementById('lastUpdateText');

    const tbody = document.getElementById('recordTbody');

    // æ’åºä¸€æ¬¡ï¼ˆä¿éšªç”¨ï¼‰
   // æ’åºä¸€æ¬¡ï¼ˆä¿éšªç”¨ï¼‰
// è®“ 11,12,1,2... é€™ç¨®è·¨å¹´è³‡æ–™èƒ½æ­£ç¢ºæ’ï¼š1 æœˆæœƒè¢«è¦–ç‚º 13 æœˆ
const startMonth = records[0].month;

records.sort((a, b) => {
  const aMonthIndex = a.month + (a.month < startMonth ? 12 : 0);
  const bMonthIndex = b.month + (b.month < startMonth ? 12 : 0);

  if (aMonthIndex === bMonthIndex) return a.day - b.day;
  return aMonthIndex - bMonthIndex;
});


    const firstRecord = records[0];
    const latestRecord = records[records.length - 1];
    const latestBmi = calcBmi(latestRecord.weight, heightCm);
    const diff = latestRecord.weight - firstRecord.weight; // æ­£ï¼šè®Šé‡ï¼›è² ï¼šè®Šç˜¦

    // é«˜åº¦æ–‡å­—
    heightText.textContent = `${heightCm} cm`;

    // æœ€è¿‘é«”é‡
    latestWeightText.textContent = `${latestRecord.weight.toFixed(2)} kg`;

    // BMI
    bmiValueEl.textContent = latestBmi.toFixed(2);
    bmiTagEl.textContent = `(${bmiCategory(latestBmi)})`;

    // è®ŠåŒ–
    const diffAbs = Math.abs(diff).toFixed(2);
    if (diff < 0) {
      diffFromStartEl.textContent = `-${diffAbs} kg`;
      diffFromStartTextEl.className = 'stat-change-positive';
      diffFromStartTextEl.textContent = 'YAPâœ¨';
    } else if (diff > 0) {
      diffFromStartEl.textContent = `+${diffAbs} kg`;
      diffFromStartTextEl.className = 'stat-change-negative';
      diffFromStartTextEl.textContent = 'æ¯”èµ·é»ç•¥é‡ä¸€é»ï¼Œå¯ä»¥å†å¾®èª¿ä¸€ä¸‹ä½œæ¯ï½';
    } else {
      diffFromStartEl.textContent = '0 kg';
      diffFromStartTextEl.className = 'stat-change-positive';
      diffFromStartTextEl.textContent = 'èˆ‡èµ·é»ä¸€æ¨£é‡ï¼Œå…ˆç©©å®šä¹Ÿæ˜¯ä¸€ç¨®é€²æ­¥ã€‚';
    }

    // ç­†æ•¸
    recordCountEl.textContent = `${records.length} ç­†`;

    // æ›´æ–°æ™‚é–“ï¼ˆé€™è£¡ç°¡å–®ç”¨æœ€å¾Œä¸€ç­†çš„æ—¥æœŸå­—ä¸²ï¼‰
    lastUpdateTextEl.textContent = `${latestRecord.month} æœˆ ${latestRecord.day} æ—¥`;

    // ====== ç”¢ç”Ÿè¡¨æ ¼ ======
    const hForBmi = heightCm;
    records.forEach((r) => {
      const tr = document.createElement('tr');
      if (r === latestRecord) {
        tr.classList.add('highlight');
      }

      const bmi = calcBmi(r.weight, hForBmi);

      const tdDate = document.createElement('td');
      tdDate.textContent = r.date;

      const tdWeight = document.createElement('td');
      tdWeight.textContent = r.weight.toFixed(2);

      const tdBmi = document.createElement('td');
      tdBmi.textContent = bmi.toFixed(2);

      tr.appendChild(tdDate);
      tr.appendChild(tdWeight);
      tr.appendChild(tdBmi);

      tbody.appendChild(tr);
    });

    // ====== ç•«åœ– ======
    const ctx = document.getElementById('weightChart').getContext('2d');

    const labels = records.map((r) => r.date);
    const data = records.map((r) => r.weight);

    const chart = new Chart(ctx, {
      type: 'line',
      data: {
        labels,
        datasets: [
          {
            label: 'é«”é‡ (kg)',
            data,
            tension: 0.3,
            fill: false,
            borderWidth: 2,
            pointRadius: 3,
            pointHoverRadius: 5
          }
        ]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        scales: {
          x: {
            ticks: {
              font: {
                size: 11
              }
            }
          },
          y: {
            title: {
              display: true,
              text: 'kg'
            },
            ticks: {
              font: {
                size: 11
              }
            }
          }
        },
        plugins: {
          legend: {
            display: false
          },
          tooltip: {
            callbacks: {
              label: function (context) {
                return `é«”é‡ï¼š${context.parsed.y.toFixed(2)} kg`;
              }
            }
          }
        }
      }
    });

    // æŠŠç·šæ¢é¡è‰²å¡é€² legend å°åœ“é»
    const lineColorDot = document.getElementById('lineColorDot');
    const datasetMeta = chart.getDatasetMeta(0);
    if (datasetMeta && datasetMeta.dataset && datasetMeta.dataset.options) {
      // Chart.js v4 é¡è‰²é è¨­æ˜¯å¾æ¨£å¼è¡¨æ±ºå®šï¼Œé€™è£¡æ‰‹å‹•å–ä¸€ä¸‹
      const strokeStyle = datasetMeta.dataset.options.borderColor || '#2563eb';
      lineColorDot.style.background = strokeStyle;
    }
  </script>
</body>
</html>
